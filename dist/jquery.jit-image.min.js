/*! jQuery JIT image - v1.0.0 - 2013-02-08
* https://github.com/DeuxHuitHuit/jQuery-jit-image
* Copyright (c) 2013 Deux Huit Huit Licensed MIT */
(function(e,t,n,r){"use strict";n=n||"data-src-format",t=t||"img["+n+"]",e.fn.on=e.fn.on||e.fn.bind;var i=e(window),s=e(),o="jitImageOptions",u=function(e){return{width:e.container.width(),height:e.container.height()}},a=function(e,t,n){t.width?e.attr("width",t.width).width(t.width):e.removeAttr("width").width(""),t.height?e.attr("height",t.height).height(t.height):e.removeAttr("height").height(""),!!n&&e.attr("src")!==n&&e.attr("src",n)},f=function(e,t,n){var r=e.attr(t.dataAttribute),i=null;return!r||(i=r.replace(t.widthPattern,n.width).replace(t.heightPattern,n.height)),i},l=function(e,t){var n=t.size(t),r=f(e,t,n);!r||t.set(e,n,r)},c=function(){e.each(s,function(n,r){var i=e(r);l(i,i.data(o))})},h=null,p=function(e){clearTimeout(h),setTimeout(c,d.eventTimeout)},d={container:null,dataAttribute:n,defaultSelector:t,size:u,set:a,widthPattern:/\$w/gi,heightPattern:/\$h/gi,updateEvents:"resize",eventTimeout:20};e.jitImage={remove:function(e){s=s.not(e)},defaults:d,_getSize:u,_set:a,_getUrlFromFormat:f},e.fn.jitImage=function(t){var n=e(this),r=function(n,r){var i=e.extend({},d,t),s=e(r);return i.container=i.container?e(i.container):s.parent(),s.data(o,i),l(s,i)};return s=s.add(n),n.each(r)},i.load(function(){e(d.defaultSelector).jitImage(),i.on(d.updateEvents,p)})})(jQuery,window.jitImageSelector,window.jitImageDataAttribute);